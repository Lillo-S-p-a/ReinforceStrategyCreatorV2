+++
# --- MDTM Task ---
id = "TASK-ARCH-20250504000000"
title = "Define Performance Metrics Calculation & Sources"
status = "ğŸŸ¢ Done" # Options: ğŸŸ¡ To Do, ğŸŸ  In Progress, ğŸŸ¢ Done, âšª Blocked, ğŸŸ£ Review
created_date = "2025-05-04"
updated_date = "2025-05-04" # Updated date
type = "ğŸ“ Design" # Options: ğŸŒŸ Feature, ğŸ Bug, ğŸ› ï¸ Chore, ğŸ§ª Test, ğŸ“š Doc, ğŸ“ Design, â“ Question, âš ï¸ Issue
priority = "ğŸŸ  Medium" # Options: ğŸ”´ High, ğŸŸ  Medium, ğŸŸ¡ Low
assigned_to = "core-architect" # Mode slug
coordinator = "TASK-CMD-20250504000000" # This Commander Task ID
# --- Relationships ---
related_tasks = [] # List of related Task IDs
related_docs = [
    "docs/requirements.md",
    "reinforcement_learning_trading_strategy_analysis.md",
    "docs/architecture.md" # Added architecture doc
    ] # List of relevant file paths
# --- Context & Details ---
tags = ["metrics", "kpi", "trading", "rl", "definition", "calculation", "data-source", "design"]
# --- Time & Effort ---
# estimated_effort = "..." # e.g., "2h", "1d", "small", "medium", "large"
# actual_effort = "..."
# due_date = "YYYY-MM-DD"
+++

# Task: Define Performance Metrics Calculation & Sources

## ğŸ¯ Goal

Define the precise calculation logic, data sources, and required granularity for key performance metrics relevant to the system (likely RL/Trading), ensuring clarity for backend implementation and dashboard visualization.

## ğŸ“– Description

Based on the user request, define the following key performance metrics:

1.  **Profit and Loss (PnL):** Financial gain/loss.
2.  **Total Reward:** Cumulative reward signal from the RL environment.
3.  **Risk-Adjusted Return:** e.g., Sharpe Ratio.
4.  **Drawdown Metrics:** e.g., Maximum Drawdown (MDD).
5.  **Efficiency/Activity Metrics:**
    *   Win Rate (% of profitable trades/episodes).
    *   Trade Frequency (trades per period/episode).
    *   Success Rate (clarify definition - e.g., % episodes meeting goal).
    *   Steps Per Episode (average simulation steps).
6.  **Resource Consumption:** e.g., CPU/GPU time per training run/episode, memory usage.

Consider the specific context provided by related documents and the likely RL/Trading domain.

## âœ… Acceptance Criteria

*   A structured document (e.g., create `.ruru/docs/metrics_definitions.md`) is produced containing:
    *   For each metric:
        *   Clear, unambiguous name.
        *   Precise mathematical formula or calculation logic.
        *   Required input data sources (e.g., trade execution logs, portfolio value history, environment state logs, system performance logs).
        *   Required granularity (e.g., per trade, daily, weekly, monthly, per episode, cumulative).
        *   Units (e.g., $, %, count, seconds).
    *   Definitions are suitable for the system's domain.
    *   Potential variations or edge cases in calculations are noted.

## ğŸ“‹ Checklist

- [âœ…] Define Profit and Loss (PnL) calculation, source, granularity.
- [âœ…] Define Total Reward calculation, source, granularity.
- [âœ…] Define Sharpe Ratio calculation (specify risk-free rate source/assumption), source, granularity.
- [âœ…] Define Maximum Drawdown (MDD) calculation, source, granularity.
- [âœ…] Define Win Rate calculation, source, granularity.
- [âœ…] Define Trade Frequency calculation, source, granularity.
- [âœ…] Define Success Rate calculation (propose a clear definition first if ambiguous), source, granularity.
- [âœ…] Define Steps Per Episode calculation, source, granularity.
- [âœ…] Define relevant Resource Consumption metrics, source, granularity.
- [âœ…] Consolidate all definitions into a new structured document: `.ruru/docs/metrics_definitions.md`.
- [âœ…] Review definitions for clarity, completeness, and suitability for backend implementation.

## ğŸªµ Log

*   2025-05-04 - Task created by Roo Commander.
*   2025-05-04 - Metrics defined and documented in `.ruru/docs/metrics_definitions.md` by core-architect. Task marked as Done.
+++
# --- MDTM Task ---
id = "TASK-ARCH-20250504000000"
title = "Define Performance Metrics Calculation & Sources"
status = "🟢 Done" # Options: 🟡 To Do, 🟠 In Progress, 🟢 Done, ⚪ Blocked, 🟣 Review
created_date = "2025-05-04"
updated_date = "2025-05-04" # Updated date
type = "📐 Design" # Options: 🌟 Feature, 🐞 Bug, 🛠️ Chore, 🧪 Test, 📚 Doc, 📐 Design, ❓ Question, ⚠️ Issue
priority = "🟠 Medium" # Options: 🔴 High, 🟠 Medium, 🟡 Low
assigned_to = "core-architect" # Mode slug
coordinator = "TASK-CMD-20250504000000" # This Commander Task ID
# --- Relationships ---
related_tasks = [] # List of related Task IDs
related_docs = [
    "docs/requirements.md",
    "reinforcement_learning_trading_strategy_analysis.md",
    "docs/architecture.md" # Added architecture doc
    ] # List of relevant file paths
# --- Context & Details ---
tags = ["metrics", "kpi", "trading", "rl", "definition", "calculation", "data-source", "design"]
# --- Time & Effort ---
# estimated_effort = "..." # e.g., "2h", "1d", "small", "medium", "large"
# actual_effort = "..."
# due_date = "YYYY-MM-DD"
+++

# Task: Define Performance Metrics Calculation & Sources

## 🎯 Goal

Define the precise calculation logic, data sources, and required granularity for key performance metrics relevant to the system (likely RL/Trading), ensuring clarity for backend implementation and dashboard visualization.

## 📖 Description

Based on the user request, define the following key performance metrics:

1.  **Profit and Loss (PnL):** Financial gain/loss.
2.  **Total Reward:** Cumulative reward signal from the RL environment.
3.  **Risk-Adjusted Return:** e.g., Sharpe Ratio.
4.  **Drawdown Metrics:** e.g., Maximum Drawdown (MDD).
5.  **Efficiency/Activity Metrics:**
    *   Win Rate (% of profitable trades/episodes).
    *   Trade Frequency (trades per period/episode).
    *   Success Rate (clarify definition - e.g., % episodes meeting goal).
    *   Steps Per Episode (average simulation steps).
6.  **Resource Consumption:** e.g., CPU/GPU time per training run/episode, memory usage.

Consider the specific context provided by related documents and the likely RL/Trading domain.

## ✅ Acceptance Criteria

*   A structured document (e.g., create `.ruru/docs/metrics_definitions.md`) is produced containing:
    *   For each metric:
        *   Clear, unambiguous name.
        *   Precise mathematical formula or calculation logic.
        *   Required input data sources (e.g., trade execution logs, portfolio value history, environment state logs, system performance logs).
        *   Required granularity (e.g., per trade, daily, weekly, monthly, per episode, cumulative).
        *   Units (e.g., $, %, count, seconds).
    *   Definitions are suitable for the system's domain.
    *   Potential variations or edge cases in calculations are noted.

## 📋 Checklist

- [✅] Define Profit and Loss (PnL) calculation, source, granularity.
- [✅] Define Total Reward calculation, source, granularity.
- [✅] Define Sharpe Ratio calculation (specify risk-free rate source/assumption), source, granularity.
- [✅] Define Maximum Drawdown (MDD) calculation, source, granularity.
- [✅] Define Win Rate calculation, source, granularity.
- [✅] Define Trade Frequency calculation, source, granularity.
- [✅] Define Success Rate calculation (propose a clear definition first if ambiguous), source, granularity.
- [✅] Define Steps Per Episode calculation, source, granularity.
- [✅] Define relevant Resource Consumption metrics, source, granularity.
- [✅] Consolidate all definitions into a new structured document: `.ruru/docs/metrics_definitions.md`.
- [✅] Review definitions for clarity, completeness, and suitability for backend implementation.

## 🪵 Log

*   2025-05-04 - Task created by Roo Commander.
*   2025-05-04 - Metrics defined and documented in `.ruru/docs/metrics_definitions.md` by core-architect. Task marked as Done.
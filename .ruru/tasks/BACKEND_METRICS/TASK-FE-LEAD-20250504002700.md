+++
# --- MDTM Task ---
id = "TASK-FE-LEAD-20250504002700"
title = "Coordinate on Metrics API Design for Dashboard Integration"
status = "ðŸŸ¢ Done" # Updated status to Done
created_date = "2025-05-04"
updated_date = "2025-05-04" # Updated date
type = "ðŸ’¬ Coordination" # Coordination task type
priority = "ðŸŸ  Medium"
assigned_to = "lead-frontend"
coordinator = "TASK-BE-LEAD-20250504000300" # Backend Lead Task ID
# --- Relationships ---
related_tasks = ["TASK-BE-LEAD-20250504000300", "TASK-FASTAPI-DEV-20250504002100"] # Relates to the main backend task and the (paused) API implementation task
related_docs = [
    ".ruru/docs/metrics_definitions.md", # Defines the data
    ".ruru/tasks/BACKEND_METRICS/TASK-FASTAPI-DEV-20250504002100.md", # Contains the proposed API design/endpoints
    "reinforcestrategycreator/api/schemas/metrics.py" # Reviewed schemas
    ]
# --- Context & Details ---
tags = ["coordination", "frontend", "backend", "api", "metrics", "dashboard", "fastapi", "feedback"] # Added feedback tag
+++

# Task: Coordinate on Metrics API Design for Dashboard Integration

## ðŸŽ¯ Goal

Review the proposed backend API design for performance metrics and provide feedback from the frontend perspective to ensure it meets the requirements for the dashboard integration.

## ðŸ“– Description

The backend team is implementing an API to expose performance metrics (defined in `.ruru/docs/metrics_definitions.md`). The proposed API structure and endpoints are detailed in the FastAPI implementation task file: `.ruru/tasks/BACKEND_METRICS/TASK-FASTAPI-DEV-20250504002100.md`.

**Note:** The actual implementation of this API (`TASK-FASTAPI-DEV-20250504002100`) is currently paused/canceled, but the design details within that task file represent the intended structure.

Please review the proposed endpoints, request/response schemas (as described in the task file), filtering capabilities, pagination, and authentication mechanism. Provide feedback on:
*   Does the proposed API structure provide the necessary data for the planned dashboard components?
*   Are the response formats suitable for frontend consumption?
*   Are the filtering/aggregation options sufficient? Are there any missing filters?
*   Is the proposed pagination acceptable?
*   Are there any concerns regarding the proposed API key authentication from a frontend integration standpoint?
*   Any other suggestions or requirements from the frontend perspective?

## âœ… Acceptance Criteria

*   The proposed API design in `TASK-FASTAPI-DEV-20250504002100.md` has been reviewed by the Frontend Lead.
*   Feedback regarding suitability for dashboard integration, data formats, filtering, pagination, and authentication has been provided.
*   Any necessary adjustments to the API design based on feedback are noted (to be addressed when implementation resumes).

## ðŸ“‹ Checklist

*   [âœ…] Review metrics definitions (`.ruru/docs/metrics_definitions.md`).
*   [âœ…] Review proposed API design in `TASK-FASTAPI-DEV-20250504002100.md`.
*   [âœ…] Assess suitability of endpoints and response schemas for the dashboard.
*   [âœ…] Assess filtering, aggregation, and pagination capabilities.
*   [âœ…] Assess authentication mechanism from frontend perspective.
*   [âœ…] Provide consolidated feedback to the Backend Lead (`TASK-BE-LEAD-20250504000300`).

## ðŸªµ Log

*   2025-05-04 - Task created and delegated by Backend Lead (`TASK-BE-LEAD-20250504000300`).
*   2025-05-04 - Reviewed metrics definitions, API design task (`TASK-FASTAPI-DEV-20250504002100`), and Pydantic schemas (`reinforcestrategycreator/api/schemas/metrics.py`). Compiled feedback below.
*   **2025-05-04 - Frontend Feedback on API Design:**
    *   **Overall Suitability:** Generally suitable for initial dashboard needs. Endpoints cover necessary data points (runs, episodes, steps, trades, summary).
    *   **Response Formats:** Pydantic schemas are well-defined. `PaginatedResponse` schema is excellent for frontend pagination implementation. Avoiding deep nesting is good.
    *   **Filtering:** Planned episode filters (`pnl`, `sharpe`, `date`) are a good start. *Suggestion:* Consider future filtering by `win_rate`, `total_steps`, or `run.parameters` if needed.
    *   **Aggregation:** `/summary/` endpoint with avg/median metrics is valuable and seems sufficient initially.
    *   **Pagination:** `PaginatedResponse` schema is ideal. Ensure standard query params (e.g., `page`, `size`). Be mindful of potential large data volume from `/steps/`.
    *   **Authentication:** `X-API-Key` is simple to integrate. Need clarity on secure key management/distribution for the frontend application based on deployment context.
    *   **CORS:** Must be enabled on the backend if API and dashboard origins differ.
    *   **Error Handling:** Recommend consistent JSON error responses for various HTTP statuses (4xx, 5xx) to simplify frontend handling.
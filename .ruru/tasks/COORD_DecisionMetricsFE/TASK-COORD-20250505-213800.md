+++
# --- MDTM Task: Coordinate Decision Metrics with Frontend ---
id = "TASK-COORD-20250505-213800"
title = "Coordination: Update Frontend for Decision Analysis Metrics"
status = "🟢 Done"
type = "🤝 Coordination"
created_date = "2025-05-05"
updated_date = "2025-05-05"
assigned_to = "lead-frontend"
coordinator = "TASK-BACKEND-20250505-211848"
priority = "Medium"
tags = ["coordination", "frontend", "backend", "dashboard", "metrics", "api"]
related_tasks = ["TASK-BACKEND-20250505-211848", "TASK-FRONTEND-20250505-211848", "TASK-API-20250505-212200"]
related_docs = [
    "dashboard/analysis.py", # Contains updated logic and new metrics
    ".ruru/tasks/ANALYSIS_DecisionMetrics/TASK-BACKEND-20250505-211848.md", # Parent task details
    ".ruru/tasks/ANALYSIS_DecisionMetrics/TASK-FRONTEND-20250505-211848.md" # Corresponding FE task
    ]
+++

# Task: Coordinate Decision Metrics with Frontend

## 1. Description

The backend logic for calculating the "Detailed Decision Analysis" metrics has been updated (`TASK-BACKEND-20250505-211848`). Key changes relevant to the frontend include:

1.  **Metric Name Changes:** Some metric keys might have changed slightly (e.g., `buy_on_price_up_rate` -> `buy_on_asset_price_up_rate`) to reflect the use of `asset_price`.
2.  **New Metrics Added:**
    *   `reward_volatility`
    *   `avg_consecutive_action_duration`
    *   `avg_consecutive_duration_per_action` (dictionary by action type: 'flat', 'long', 'short')
    *   `avg_reward_per_action` (dictionary by action type: 'flat', 'long', 'short')
3.  **Action Code Definitions:** Confirmed action codes used in `typical_action` within `best/worst_decision_context` are:
    *   `0`: 'flat'
    *   `1`: 'long'
    *   `2`: 'short'
    *   The `typical_action` field in the context dictionary now returns the string representation ('flat', 'long', 'short', 'unknown').

Please review these changes and update the frontend (`TASK-FRONTEND-20250505-211848`) accordingly to correctly display the updated and new metrics, and potentially adjust labels/tooltips.

## 2. Acceptance Criteria

*   Frontend Lead acknowledges the changes.
*   Frontend task (`TASK-FRONTEND-20250505-211848`) is updated to reflect the new/changed metric keys and definitions.
*   Any necessary UI adjustments are planned/implemented in the frontend task.

## 3. Checklist

*   [✅] Review changes in `dashboard/analysis.py` (specifically the `analyze_decision_making` function's return dictionary keys).
*   [✅] Review action code definitions (0=flat, 1=long, 2=short). Note that `typical_action` now returns the string.
*   [✅] Update `TASK-FRONTEND-20250505-211848` with necessary changes.
*   [✅] Confirm coordination completion by updating this task status.

## 4. Implementation Notes & Logs

*(Frontend Lead / Coordinator add notes here)*
*   **2025-05-05 (lead-frontend):** Reviewed backend changes and updated frontend task `TASK-FRONTEND-20250505-211848` accordingly. Marked this coordination task as Done.
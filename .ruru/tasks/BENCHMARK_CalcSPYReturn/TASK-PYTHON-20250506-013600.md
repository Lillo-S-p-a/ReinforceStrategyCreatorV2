+++
# --- MDTM Task File ---
id = "TASK-PYTHON-20250506-013600"
title = "Calculate SPY Buy & Hold Total Return % (2020-2023)"
status = "🟢 Done" # Options: 🟡 To Do, 🟠 In Progress, 🟢 Done, ⚪ Blocked, 🟣 Review
type = "🔬 Analysis" # Options: 🌟 Feature, 🐞 Bug, 🛠️ Refactor, 🧪 Test, 📄 Documentation, 🔬 Analysis, ⚙️ Chore
created_date = "2025-05-06"
updated_date = "2025-05-06" # Updated by dev-python
assigned_to = "dev-python" # Mode slug
coordinator = "TASK-CMD-..." # Replace with actual Commander Task ID if available
priority = "Critical" # Needed before starting optimization loop
complexity = "Low"
estimated_effort = "0.5h"
related_tasks = []
target_branch = "feature/rl-strategy-enhancements" # Relevant context
tags = ["benchmark", "spy", "yfinance", "analysis", "python"]
# --- End Metadata ---
+++

# Calculate SPY Buy & Hold Total Return % (2020-2023)

## 1. Description

To establish the performance benchmark for the RL agent optimization loop, calculate the total percentage return for a simple Buy & Hold strategy on SPY (SPDR S&P 500 ETF Trust) for the period from 2020-01-01 to 2023-12-31.

Use `yfinance` or another reliable data source to get the adjusted closing prices for SPY for the specified date range.

## 2. Acceptance Criteria

*   Fetch SPY adjusted closing price data for 2020-01-01 to 2023-12-31.
*   Calculate the total percentage return based on the first and last adjusted close prices in the period.
*   The calculated benchmark return percentage is documented clearly in this task file.

## 3. Checklist

*   [✅] Import necessary libraries (`yfinance`, `pandas`).
*   [✅] Define start and end dates (2020-01-01, 2023-12-31).
*   [✅] Fetch SPY adjusted close data using `yfinance.download()`.
*   [✅] Get the first and last adjusted close values.
*   [✅] Calculate Total Return % = `((last_price / first_price) - 1) * 100`.
*   [✅] Document the calculated percentage in the Logs/Notes section.

## 4. Logs / Notes

*(Python Developer will add the calculation script/steps and the final benchmark percentage here)*

**Calculation Steps (Python):**
```python
import yfinance as yf
import pandas as pd

ticker = 'SPY'
start_date = '2020-01-01'
# Use end_date + 1 day to ensure the last day of 2023 is included
end_date = '2024-01-01'

# Download data, auto_adjust=True uses adjusted close implicitly
data = yf.download(ticker, start=start_date, end=end_date, progress=False, auto_adjust=True)
data.sort_index(inplace=True)

# Get the first trading day's data on or after start_date
first_day_data = data[data.index >= pd.to_datetime(start_date)].iloc[0]
# Get the last trading day's data on or before 2023-12-31
last_day_data = data[data.index <= pd.to_datetime('2023-12-31')].iloc[-1]

# Extract scalar values using .item()
first_price = first_day_data['Close'].item()
last_price = last_day_data['Close'].item()

# Calculate total return percentage
total_return_pct = ((last_price / first_price) - 1) * 100

start_dt_str = first_day_data.name.strftime('%Y-%m-%d')
end_dt_str = last_day_data.name.strftime('%Y-%m-%d')

print(f'SPY Buy & Hold Total Return ({start_dt_str} to {end_dt_str}): {total_return_pct:.2f}%')
```

**Result:**
SPY Buy & Hold Total Return (2020-01-02 to 2023-12-29): **55.81%**